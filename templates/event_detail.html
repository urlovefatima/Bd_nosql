<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Match de Gala | Détails de l'événement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #7b10ff;
            --primary-light: #9c4fff;
            --primary-dark: #5a0db8;
            --secondary: #f0e6ff;
            --text-dark: #333;
            --text-light: #fff;
            --gray-light: #f8f9fa;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-dark);
            background-color: #f9f7ff;
        }
        
        .navbar {
            background-color: var(--primary);
        }
        
        .nav-link {
            color: var(--text-light) !important;
            font-weight: 500;
        }
        
        .banner {
            height: 350px;
            background-size: cover;
            background-position: center;
            position: relative;
        }
        
        .banner-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(to bottom, rgba(0,0,0,0.2), rgba(0,0,0,0.6));
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            padding: 2rem;
            color: white;
        }
        
        .event-profile-img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
            position: absolute;
            bottom: -50px;
            left: 50px;
        }
        
        .card {
            border: none;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            transition: transform 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
        }
        
        .btn-primary {
            background-color: var(--primary);
            border-color: var(--primary);
            border-radius: 25px;
            padding: 10px 30px;
            font-weight: 600;
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
            border-color: var(--primary-dark);
        }
        
        .category-badge {
            background-color: var(--secondary);
            color: var(--primary);
            font-weight: 600;
            border-radius: 20px;
            padding: 5px 15px;
            text-transform: capitalize;
        }
        
        .event-info-item {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .event-info-icon {
            background-color: var(--secondary);
            color: var(--primary);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
        }
        
        .countdown-container {
            background: linear-gradient(45deg, var(--primary), var(--primary-light));
            border-radius: 15px;
            padding: 20px;
            color: white;
        }
        
        .countdown-item {
            text-align: center;
            padding: 10px;
        }
        
        .countdown-number {
            font-size: 2rem;
            font-weight: 700;
        }
        
        .countdown-label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }
        
        .section-title {
            position: relative;
            padding-bottom: 10px;
            margin-bottom: 25px;
        }
        
        .section-title::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 50px;
            height: 3px;
            background-color: var(--primary);
        }
        
        footer {
            background-color: var(--primary-dark);
            color: var(--text-light);
        }
        
        @media (max-width: 768px) {
            .banner {
                height: 250px;
            }
            
            .event-profile-img {
                width: 80px;
                height: 80px;
                bottom: -40px;
                left: 30px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand" href="#">EventSN</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#">Accueil</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Événements</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Contact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#">Connexion</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Event Banner -->
    <div class="banner" id="event-banner" style="background-image: url('{{ event.photo_couverture }}');">
        <div class="banner-overlay">
            <span class="category-badge">{{event.categorie}}</span>
            <h1 class="display-4 fw-bold">{{event.titre}}</h1>
        </div>
    </div>

    <!-- Main Content -->
    <div class="container my-5">
        <div class="row g-4">
            <!-- Event Details -->
            <div class="col-lg-8">
                <div class="card p-4 mb-4">
                    <h2 class="section-title">Détails de l'événement</h2>
                    
                    <div class="event-info-item">
                        <div class="event-info-icon">
                            <i class="fas fa-map-marker-alt"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Lieu</p>
                            <p class="mb-0" id="event-location">{{event.localisation}}</p>
                        </div>
                    </div>
                    
                    <div class="event-info-item">
                        <div class="event-info-icon">
                            <i class="fas fa-calendar-alt"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Date & Heure</p>
                            <p class="mb-0" id="event-datetime">{{event.date_heure}}</p>
                        </div>
                    </div>
                    
                    <div class="event-info-item">
                        <div class="event-info-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Capacité</p>
                            <p class="mb-0" id="event-capacity">{{event.capacite}} personnes</p>
                        </div>
                    </div>
                    
                    <div class="event-info-item">
                        <div class="event-info-icon">
                            <i class="fas fa-ticket-alt"></i>
                        </div>
                        <div>
                            <p class="mb-0 fw-bold">Réservations</p>
                            <p class="mb-0" id="event-reservations">{{nombre_reservation}} réservations</p>
                        </div>
                    </div>
                </div>
                
                <div class="card p-4">
                    <h2 class="section-title">Description</h2>
                    <p>Ce match de gala exceptionnel rassemblera les meilleurs talents sportifs de la région pour une compétition amicale mais intense. Venez encourager vos athlètes préférés et profiter d'une journée remplie d'action et de divertissement!</p>
                    
                    <div class="d-grid gap-2 d-md-flex justify-content-md-start mt-4">
                        <button class="btn btn-primary me-md-2">Réserver maintenant</button>
                        <button class="btn btn-outline-primary">Partager <i class="fas fa-share-alt ms-2"></i></button>
                    </div>
                </div>
            </div>
            
            <!-- Sidebar -->
            <div class="col-lg-4">
                <div class="card p-4 mb-4 countdown-container">
                    <h4 class="text-center mb-4">Compte à rebours</h4>
                    <div class="row" id="countdown">
                        <div class="col-3 countdown-item">
                            <div class="countdown-number" id="days">00</div>
                            <div class="countdown-label">Jours</div>
                        </div>
                        <div class="col-3 countdown-item">
                            <div class="countdown-number" id="hours">00</div>
                            <div class="countdown-label">Heures</div>
                        </div>
                        <div class="col-3 countdown-item">
                            <div class="countdown-number" id="minutes">00</div>
                            <div class="countdown-label">Minutes</div>
                        </div>
                        <div class="col-3 countdown-item">
                            <div class="countdown-number" id="seconds">00</div>
                            <div class="countdown-label">Secondes</div>
                        </div>
                    </div>
                </div>
                
                <div class="card p-4">
                    <h4 class="section-title">Informations complémentaires</h4>
                    <div class="mb-3">
                        <p class="fw-bold mb-1">Catégorie</p>
                        <span class="category-badge" id="event-category">{{event.categorie}}</span>
                    </div>
                    <div class="mb-3">
                        <p class="fw-bold mb-1">Organisateur</p>
                        <div class="d-flex align-items-center">
                            <img src="{{ user.photo_profil }}" alt="Organisateur" class="rounded-circle me-2" width="30" height="30">
                            <span>{{user.prenom}} {{user.nom}}</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <p class="fw-bold mb-1">Places disponibles</p>
                        <div class="progress" style="height: 10px;">
                            <div class="progress-bar" id="availability-progress" role="progressbar" style="width: 1%; background-color: var(--primary);" aria-valuenow="1" aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <small class="text-muted" id="availability-text">298 places disponibles sur 300</small>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="py-4 mt-5">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h5>EventSN</h5>
                    <p class="small">La meilleure plateforme pour découvrir et réserver des événements au Sénégal.</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <div class="mb-2">
                        <a href="#" class="text-light me-3"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="text-light me-3"><i class="fab fa-instagram"></i></a>
                    </div>
                    <p class="small">&copy; 2025 EventSN. Tous droits réservés.</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialiser les données de l'événement
        const eventData = {
            "_id": "6826f536e9f0333804888d0d",
            "titre": "Match de Gala",
            "localisation": "Dakar",
            "date_heure": "2025-06-30T15:00:00.000Z",
            "capacite": 300,
            "photo_profil": "/media/default_profil.png",
            "photo_couverture": "/media/default_couverture.jpg",
            "createur": "6826114cfd3c46eeee5423e0",
            "reservations": [
                "6826f536e9f0333804888d0e",
                "6826f536e9f0333804888d0f"
            ],
            "categorie": "sport"
        };

        // Charger les images
        
        // Calculer les places disponibles
        const placesReservees = eventData.reservations.length;
        const placesDisponibles = eventData.capacite - placesReservees;
        const pourcentageReserve = (placesReservees / eventData.capacite) * 100;
        
        document.getElementById('availability-progress').style.width = `${pourcentageReserve}%`;
        document.getElementById('availability-text').textContent = `${placesDisponibles} places disponibles sur ${eventData.capacite}`;
        
        // Fonction de compte à rebours
        function updateCountdown() {
            const now = new Date().getTime();
            const eventTime = new Date(eventData.date_heure).getTime();
            const timeLeft = eventTime - now;
            
            if (timeLeft <= 0) {
                document.getElementById('days').textContent = '00';
                document.getElementById('hours').textContent = '00';
                document.getElementById('minutes').textContent = '00';
                document.getElementById('seconds').textContent = '00';
                return;
            }
            
            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
            
            document.getElementById('days').textContent = days.toString().padStart(2, '0');
            document.getElementById('hours').textContent = hours.toString().padStart(2, '0');
            document.getElementById('minutes').textContent = minutes.toString().padStart(2, '0');
            document.getElementById('seconds').textContent = seconds.toString().padStart(2, '0');
        }
        
        // Mettre à jour le compte à rebours toutes les secondes
        updateCountdown();
        setInterval(updateCountdown, 1000);
    </script>
</body>
</html>